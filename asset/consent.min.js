class aCCMBanner{constructor(e){this.config=e,this.wrapper=null,this.banner=null,this.modal=null,this.cookieIcon=null,this.backdrop=null,this.createWrapper(),this.shouldShowBackdrop()&&this.createBackdrop(),this.createCookieIcon(),this.createModal(),this.shouldShowBanner()?(this.createBanner(),this.showBackdrop()):this.showCookieIcon(),this.setupEventListeners(),this.hasSetInitialCookieChoices()&&(this.loadRequiredCookies(),this.runAcceptedCookieCallbacks())}destroyCookieBanner(){this.wrapper&&this.wrapper.parentNode&&this.wrapper.parentNode.removeChild(this.wrapper),this.allowBodyScroll(),this.wrapper=null,this.banner=null,this.modal=null,this.cookieIcon=null,this.backdrop=null}createWrapper(){this.wrapper=document.createElement("div"),this.wrapper.id="consentWrap",document.body.insertBefore(this.wrapper,document.body.firstChild)}createWrapperChild(e,t){let i=document.createElement("div");return i.id=t,i.innerHTML=e,this.wrapper&&document.body.contains(this.wrapper)||this.createWrapper(),this.wrapper.appendChild(i),i}createBackdrop(){this.backdrop=this.createWrapperChild(null,"cBackdrop")}showBackdrop(){this.backdrop&&(this.backdrop.style.display="block"),"function"==typeof this.config.onBackdropOpen&&this.config.onBackdropOpen()}hideBackdrop(){this.backdrop&&(this.backdrop.style.display="none"),"function"==typeof this.config.onBackdropClose&&this.config.onBackdropClose()}shouldShowBackdrop(){return this.config?.background?.showBackground||!1}updateCheckboxState(e=!1){let t=this.modal.querySelector("#cookie-preferences"),i=t.querySelectorAll('input[type="checkbox"]');i.forEach(t=>{let[,i]=t.id.split("cookies-"),o=this.config.cookieTypes.find(e=>e.id===i);if(o){if(e){let n=t.checked;o.required?localStorage.setItem(`webCCookie_${i}${this.getBannerSuffix()}`,"true"):(localStorage.setItem(`webCCookie_${i}${this.getBannerSuffix()}`,n.toString()),n&&"function"==typeof o.onAccept?o.onAccept():n||"function"!=typeof o.onReject||o.onReject())}else if(o.required)t.checked=!0,t.disabled=!0;else{let c=localStorage.getItem(`webCCookie_${i}${this.getBannerSuffix()}`);null!==c?t.checked="true"===c:t.checked=!!o.defaultValue}}})}setInitialCookieChoiceMade(){window.localStorage.setItem(`aCCMBanner_InitialChoice${this.getBannerSuffix()}`,1)}handleCookieChoice(e){this.setInitialCookieChoiceMade(),this.removeBanner(),this.hideBackdrop(),this.toggleModal(!1),this.showCookieIcon(),this.config.cookieTypes.forEach(t=>{!0==t.required?(localStorage.setItem(`webCCookie_${t.id}${this.getBannerSuffix()}`,"true"),"function"==typeof t.onAccept&&t.onAccept()):(localStorage.setItem(`webCCookie_${t.id}${this.getBannerSuffix()}`,e.toString()),e?"function"==typeof t.onAccept&&t.onAccept():"function"==typeof t.onReject&&t.onReject())}),e&&"function"==typeof this.config.onAcceptAll?"function"==typeof this.config.onAcceptAll&&this.config.onAcceptAll():"function"==typeof this.config.onRejectAll&&"function"==typeof this.config.onRejectAll&&this.config.onRejectAll(),this.updateCheckboxState()}getAcceptedCookies(){return(this.config.cookieTypes||[]).reduce((e,t)=>(e[t.id]="true"===localStorage.getItem(`webCCookie_${t.id}${this.getBannerSuffix()}`),e),{})}runAcceptedCookieCallbacks(){if(!this.config.cookieTypes)return;let e=this.getAcceptedCookies();this.config.cookieTypes.forEach(t=>{!t.required&&e[t.id]&&"function"==typeof t.onAccept&&"function"==typeof t.onAccept&&t.onAccept()})}runRejectedCookieCallbacks(){if(!this.config.cookieTypes)return;let e=this.getRejectedCookies();this.config.cookieTypes.forEach(t=>{e[t.id]&&"function"==typeof t.onReject&&"function"==typeof t.onReject&&t.onReject()})}runStoredCookiePreferenceCallbacks(){this.config.cookieTypes.forEach(e=>{let t="true"===localStorage.getItem(`webCCookie_${e.id}${this.getBannerSuffix()}`);t?"function"==typeof e.onAccept&&e.onAccept():"function"==typeof e.onReject&&e.onReject()})}loadRequiredCookies(){this.config.cookieTypes&&this.config.cookieTypes.forEach(e=>{e.required&&"function"==typeof e.onAccept&&"function"==typeof e.onAccept&&e.onAccept()})}getBannerContent(){let e=this.config.text?.banner?.title||"Privasi Anda penting bagi kami.",t=this.config.text?.banner?.description||"<p>Kami memproses informasi pribadi Anda untuk mengukur dan meningkatkan situs dan layanan kami, untuk membantu kampanye pemasaran kami, dan untuk menyediakan konten dan iklan yang dipersonalisasi. Untuk informasi lebih lanjut, lihat <a href='/p/privacy-policy.html' target='_blank'>Kebijakan Privasi</a> kami.</p>",i=this.config.text?.banner?.acceptAllButtonText||"Terima",o=this.config.text?.banner?.acceptAllButtonAccessibleLabel,n=`<button class="accept-all stB stBPaccept"${o&&o!==i?` aria-label="${o}"`:""}>${i}</button>`,c=this.config.text?.banner?.rejectNonEssentialButtonText||"Tolak",s=this.config.text?.banner?.rejectNonEssentialButtonAccessibleLabel,a=`<button class="reject-all stB stBPreject"${s&&s!==c?` aria-label="${s}"`:""}>${c}</button>`,r=this.config.text?.banner?.preferencesButtonAccessibleLabel||"Kelola Preferensi",l=`<button class="preferences"${r?` aria-label="${r}"`:""}><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#000000" aria-hidden="true"><path d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Zm70-80h79l14-106q31-8 57.5-23.5T639-327l99 41 39-68-86-65q5-14 7-29.5t2-31.5q0-16-2-31.5t-7-29.5l86-65-39-68-99 42q-22-23-48.5-38.5T533-694l-13-106h-79l-14 106q-31 8-57.5 23.5T321-633l-99-41-39 68 86 64q-5 15-7 30t-2 32q0 16 2 31t7 30l-86 65 39 68 99-42q22 23 48.5 38.5T427-266l13 106Zm42-180q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Zm-2-140Z"/></svg></button>`,h=`<div class="actCT"><h2>${e}</h2>${t}</div><div class="actCC"><div class="actCC-setting">${l}</div>${n}${a}</div>`;return h}hasSetInitialCookieChoices(){return!!localStorage.getItem(`aCCMBanner_InitialChoice${this.getBannerSuffix()}`)}createBanner(){this.banner=this.createWrapperChild(this.getBannerContent(),"webCB"),this.banner&&this.config.position?.banner&&this.banner.classList.add(this.config.position.banner),this.banner&&"function"==typeof this.config.onBannerOpen&&this.config.onBannerOpen()}removeBanner(){this.banner&&this.banner.parentNode&&(this.banner.parentNode.removeChild(this.banner),this.banner=null,"function"==typeof this.config.onBannerClose&&this.config.onBannerClose())}shouldShowBanner(){return!1!==this.config.showBanner&&null===localStorage.getItem(`aCCMBanner_InitialChoice${this.getBannerSuffix()}`)}getModalContent(){let e=this.config.text?.preferences?.title||"Manage Consent Preferences",t=this.config.text?.preferences?.description||"<p>Kami menghormati hak privasi Anda. Anda dapat memilih untuk tidak mengizinkan beberapa jenis cookie. Preferensi cookie Anda akan berlaku di seluruh situs web kami.</p>",i=this.config.text?.banner?.preferencesButtonAccessibleLabel,o=`<button class="settingClose"${i?` aria-label="${i}"`:""}><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M19.4081 3.41559C20.189 2.6347 20.189 1.36655 19.4081 0.585663C18.6272 -0.195221 17.3591 -0.195221 16.5782 0.585663L10 7.17008L3.41559 0.59191C2.6347 -0.188974 1.36655 -0.188974 0.585663 0.59191C-0.195221 1.37279 -0.195221 2.64095 0.585663 3.42183L7.17008 10L0.59191 16.5844C-0.188974 17.3653 -0.188974 18.6335 0.59191 19.4143C1.37279 20.1952 2.64095 20.1952 3.42183 19.4143L10 12.8299L16.5844 19.4081C17.3653 20.189 18.6335 20.189 19.4143 19.4081C20.1952 18.6272 20.1952 17.3591 19.4143 16.5782L12.8299 10L19.4081 3.41559Z"/></svg></button>`,n=this.config.cookieTypes||[],c=this.getAcceptedCookies(),s=this.config.text?.banner?.acceptAllButtonText||"Terima",a=this.config.text?.banner?.acceptAllButtonAccessibleLabel,r=`<button class="preferences-accept-all stB stBPaccept"${a&&a!==s?` aria-label="${a}"`:""}>${s}</button>`,l=this.config.text?.banner?.rejectNonEssentialButtonText||"Tolak",h=this.config.text?.banner?.rejectNonEssentialButtonAccessibleLabel,d=`<button class="preferences-reject-all stB stBPreject"${h&&h!==l?` aria-label="${h}"`:""}>${l}</button>`,p=`<header><h1>${e}</h1>${o}</header>${t}<section id="cookie-preferences">${n.map(e=>{let t=c[e.id],i=!1;return t&&(i=!0),t||this.hasSetInitialCookieChoices()||(i=e.defaultValue),`<fieldset><legend>${e.name}</legend><div class="cookie-type-content"><div class="cookie-type-description">${e.description}</div><label class="switch" for="cookies-${e.id}"><input type="checkbox" id="cookies-${e.id}" ${e.required?"checked disabled":i?"checked":""} /><span class="switch__pill" aria-hidden="true"></span><span class="switch__dot" aria-hidden="true"></span><span class="switch__off" aria-hidden="true">Off</span><span class="switch__on" aria-hidden="true">On</span></label></div></fieldset>`}).join("")}</section><footer>${r}${d}</footer> `;return p}createModal(){this.modal=this.createWrapperChild(this.getModalContent(),"consentSetting")}toggleModal(e){if(this.modal){if(this.modal.style.display=e?"flex":"none",e){this.showBackdrop(),this.hideCookieIcon(),this.removeBanner(),this.preventBodyScroll();let t=this.modal.querySelector(".settingClose");t.focus(),"function"==typeof this.config.onPreferencesOpen&&this.config.onPreferencesOpen(),this.updateCheckboxState(!1)}else this.setInitialCookieChoiceMade(),this.updateCheckboxState(!0),this.hideBackdrop(),this.showCookieIcon(),this.allowBodyScroll(),"function"==typeof this.config.onPreferencesClose&&this.config.onPreferencesClose()}}getCookieIconContent(){return` <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="none"><path d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Zm70-80h79l14-106q31-8 57.5-23.5T639-327l99 41 39-68-86-65q5-14 7-29.5t2-31.5q0-16-2-31.5t-7-29.5l86-65-39-68-99 42q-22-23-48.5-38.5T533-694l-13-106h-79l-14 106q-31 8-57.5 23.5T321-633l-99-41-39 68 86 64q-5 15-7 30t-2 32q0 16 2 31t7 30l-86 65 39 68 99-42q22 23 48.5 38.5T427-266l13 106Zm42-180q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Zm-2-140Z"/></svg> `}createCookieIcon(){this.cookieIcon=document.createElement("button"),this.cookieIcon.id="cookieSetting",this.cookieIcon.innerHTML=this.getCookieIconContent(),this.config.text?.banner?.preferencesButtonAccessibleLabel&&(this.cookieIcon.ariaLabel=this.config.text?.banner?.preferencesButtonAccessibleLabel),this.wrapper&&document.body.contains(this.wrapper)||this.createWrapper(),this.wrapper.appendChild(this.cookieIcon),this.cookieIcon&&this.config.cookieIcon?.position&&this.cookieIcon.classList.add(this.config.cookieIcon.position),this.cookieIcon&&this.config.cookieIcon?.colorScheme&&this.cookieIcon.classList.add(this.config.cookieIcon.colorScheme)}showCookieIcon(){this.cookieIcon&&(this.cookieIcon.style.display="none")}hideCookieIcon(){this.cookieIcon&&(this.cookieIcon.style.display="none")}handleClosedWithNoChoice(){this.config.cookieTypes.forEach(e=>{let t=!0;!0==e.required||e.defaultValue||(t=!1),localStorage.setItem(`webCCookie_${e.id}${this.getBannerSuffix()}`,t.toString()),t?"function"==typeof e.onAccept&&e.onAccept():"function"==typeof e.onReject&&e.onReject(),this.setInitialCookieChoiceMade(),this.updateCheckboxState()})}getFocusableElements(e){return e.querySelectorAll('button, a[href], input, select, textarea, [tabindex]:not([tabindex="-1"])')}setupEventListeners(){if(this.banner){let e=this.banner.querySelector(".accept-all"),t=this.banner.querySelector(".reject-all"),i=this.banner.querySelector(".preferences");e?.addEventListener("click",()=>this.handleCookieChoice(!0)),t?.addEventListener("click",()=>this.handleCookieChoice(!1)),i?.addEventListener("click",()=>{this.showBackdrop(),this.toggleModal(!0)});let o=this.getFocusableElements(this.banner),n=o[0],c=o[o.length-1];this.banner.addEventListener("keydown",e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===n&&(c.focus(),e.preventDefault()):document.activeElement===c&&(n.focus(),e.preventDefault()))}),"wizard"!==this.config.mode&&e?.focus()}if(this.modal){let s=this.modal.querySelector(".settingClose"),a=this.modal.querySelector(".preferences-accept-all"),r=this.modal.querySelector(".preferences-reject-all");s?.addEventListener("click",()=>{this.toggleModal(!1);let e=this.hasSetInitialCookieChoices();e?this.runStoredCookiePreferenceCallbacks():this.handleClosedWithNoChoice()}),a?.addEventListener("click",()=>this.handleCookieChoice(!0)),r?.addEventListener("click",()=>this.handleCookieChoice(!1));let l=this.getFocusableElements(this.modal),h=l[0],d=l[l.length-1];this.modal.addEventListener("keydown",e=>{"Tab"===e.key&&(e.shiftKey?document.activeElement===h&&(d.focus(),e.preventDefault()):document.activeElement===d&&(h.focus(),e.preventDefault())),"Escape"===e.key&&this.toggleModal(!1)}),s?.focus();let p=this.modal.querySelector("#cookie-preferences"),_=p.querySelectorAll('input[type="checkbox"]');_.forEach(e=>{e.addEventListener("change",e=>{let[,t]=e.target.id.split("cookies-"),i=e.target.checked,o="true"===localStorage.getItem(`webCCookie_${t}${this.getBannerSuffix()}`);if(i!==o){let n=this.config.cookieTypes.find(e=>e.id===t);n&&(localStorage.setItem(`webCCookie_${t}${this.getBannerSuffix()}`,i.toString()),i&&"function"==typeof n.onAccept?n.onAccept():i||"function"!=typeof n.onReject||n.onReject())}})})}this.cookieIcon&&this.cookieIcon.addEventListener("click",()=>{this.modal?"none"===this.modal.style.display||""===this.modal.style.display?(this.toggleModal(!0),this.hideCookieIcon()):this.toggleModal(!1):(this.createModal(),this.toggleModal(!0),this.hideCookieIcon())})}getBannerSuffix(){return this.config.bannerSuffix?"_"+this.config.bannerSuffix:""}preventBodyScroll(){document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%"}allowBodyScroll(){document.body.style.overflow="",document.body.style.position="",document.body.style.width=""}}!function(){window.aCCM={};let e={},t;function i(){t||(t=new aCCMBanner(e))}window.aCCM.initCookieBanner=i,window.aCCM.updateCookieBannerConfig=function o(n={}){e={...e,...n},t&&(t.destroyCookieBanner(),t=null),document.body?i():document.addEventListener("DOMContentLoaded",i,{once:!0})},window.aCCM.injectScript=function e(t,i){let o=document.querySelector(`script[src="${t}"]`);if(o)return;let n=document.createElement("script");n.src=t,"async"===i?n.async=!0:"defer"===i&&(n.defer=!0),document.head.appendChild(n)},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i,{once:!0}):i()}();
